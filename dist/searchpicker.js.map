{"version":3,"sources":["webpack:///webpack/bootstrap 2e30d868cc21f7628a52","webpack:///./src/Utils.ts","webpack:///./src/EventObject.ts","webpack:///./src/options/DefaultSearchPickerOptions.ts","webpack:///./src/SearchPickerChoices.ts","webpack:///./src/SearchPickerResults.ts","webpack:///./src/index.ts","webpack:///./src/pickeritems/DefaultPickerItem.ts","webpack:///./src/searchers/DefaultSearcher.ts","webpack:///./src/SearchPicker.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,2DAA2D;AAC3D;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACO;;;;;;;;ACrIR;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,2BAA2B,mCAAmC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACO;;;;;;;;;;;;ACvBoB;AACV;AACQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sBAAsB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACO;;;;;;;;;;ACzCR;AAAA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACqB;AACJ;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,eAAe,cAAc;AAC7E;AACA,2BAA2B,mBAAmB;AAC9C;AACA,kJAAkG;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gBAAgB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gBAAgB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+GAA+D;AAC/D;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmD;AACnD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,0BAA0B;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,sCAAsC;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACO;;;;;;;;;;ACtaR;AAAA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACiB;AACI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,wBAAwB;AAC3E;AACA,yDAAyD,QAAQ;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,uBAAuB,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,wBAAwB;AACxB,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,wBAAwB;AACxB,SAAS;AACT;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACO;;;;;;;;;;;;;;;;;;;;;ACpX6B;AACf;AACC;AACO;AACA;AACZ;;;;;;;;ACLlB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACO;;;;;;;;;;ACXU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACO;AACR;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;;;;;;;;;;;;;AC3BA;AAAA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACqB;AACQ;AACA;AACO;AACnB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,wBAAwB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,kDAAkD,yCAAyC,EAAE;AAC7F,gDAAgD,uCAAuC,EAAE;AACzF,0DAA0D,oCAAoC,EAAE;AAChG,6DAA6D,uCAAuC,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACO","file":"searchpicker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2e30d868cc21f7628a52","var Utility = (function () {\r\n    function Utility() {\r\n    }\r\n    Utility.wrapResultText = function (source, query) {\r\n        var nodes = [];\r\n        var startpos;\r\n        var zregex = new RegExp(query.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\"), 'i');\r\n        if (query.length) {\r\n            startpos = source.search(zregex);\r\n            if (startpos < 0) {\r\n                nodes.push(document.createTextNode(source));\r\n            }\r\n            else {\r\n                nodes.push(document.createTextNode(source.substr(0, startpos)));\r\n                var em = document.createElement('em');\r\n                em.appendChild(document.createTextNode(source.substr(0, startpos + query.length).substr(startpos)));\r\n                nodes.push(em);\r\n                nodes.push(document.createTextNode(source.substr(startpos + query.length)));\r\n            }\r\n        }\r\n        else {\r\n            nodes.push(document.createTextNode(source));\r\n        }\r\n        return nodes;\r\n    };\r\n    Utility.filterItems = function (items, query, options) {\r\n        query = Utility.ltrim(query); //trim input query\r\n        var regex = new RegExp('^' + query.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\"), 'i');\r\n        var ref = items.slice(0);\r\n        var foundItems = [];\r\n        for (var i = 0; i < ref.length; i++) {\r\n            var item = ref[i];\r\n            var itemName = item.title;\r\n            if (options.searchInValues) {\r\n                itemName += ' ' + item.id.replace(/^\\w+\\\\/g, '');\r\n            }\r\n            if (regex.test(item.title)) {\r\n                foundItems.push(item);\r\n            }\r\n            else if (itemName.indexOf(' ') >= 0 || itemName.indexOf('[') === 0 || itemName.indexOf('\\\\') >= 0) {\r\n                var parts = itemName.replace(/[\\[]/g, '').replace(/\\\\/g, ' ').split(' ');\r\n                if (parts.length) {\r\n                    for (var j = 0; j < parts.length; j++) {\r\n                        var part = parts[j];\r\n                        if (regex.test(part)) {\r\n                            foundItems.push(item);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return foundItems;\r\n    };\r\n    Utility.parseHtml = function (html) {\r\n        var root = document.createElement(\"div\");\r\n        root.innerHTML = html;\r\n        return root.firstChild;\r\n    };\r\n    Utility.hasClass = function (elem, clsName) {\r\n        if (elem.classList) {\r\n            return elem.classList.contains(clsName);\r\n        }\r\n        //IE fallback:\r\n        return elem.className.match(new RegExp('(\\\\s|^)' + clsName + '(\\\\s|$)')) != null;\r\n    };\r\n    Utility.getAttribute = function (element, attrName) {\r\n        var attr = element.attributes[attrName];\r\n        if (!attr)\r\n            return undefined;\r\n        return attr.value;\r\n    };\r\n    Utility.htmlEncode = function (value) {\r\n        var div = document.createElement('div');\r\n        var text = document.createTextNode(value);\r\n        div.appendChild(text);\r\n        return div.innerHTML;\r\n    };\r\n    Utility.addClass = function (elem, clsName) {\r\n        if (elem.classList) {\r\n            elem.classList.add(clsName);\r\n            return;\r\n        }\r\n        if (!Utility.hasClass(elem, clsName))\r\n            elem.className += \" \" + clsName;\r\n    };\r\n    Utility.removeClass = function (elem, clsName) {\r\n        if (Utility.hasClass(elem, clsName)) {\r\n            if (elem.classList) {\r\n                elem.classList.remove(clsName);\r\n                return;\r\n            }\r\n            var reg = new RegExp('(\\\\s|^)' + clsName + '(\\\\s|$)');\r\n            elem.className = elem.className.replace(reg, ' ');\r\n        }\r\n    };\r\n    Utility.getCssPropertyValue = function (elem, propname) {\r\n        var computedStyle;\r\n        if (window.getComputedStyle) {\r\n            computedStyle = window.getComputedStyle(elem, null);\r\n        }\r\n        else {\r\n            computedStyle = elem.currentStyle;\r\n        }\r\n        return computedStyle.getPropertyValue(propname);\r\n    };\r\n    Utility.isArray = function (obj) {\r\n        return Array.isArray(obj);\r\n    };\r\n    Utility.isString = function (obj) {\r\n        return typeof (obj) === 'string';\r\n    };\r\n    Utility.trim = function (source) {\r\n        if (!String.prototype.trim) {\r\n            return source.replace(/^\\s+|\\s+$/g, '');\r\n        }\r\n        return source.trim();\r\n    };\r\n    Utility.ltrim = function (source) {\r\n        return source.replace(/^\\s+/, '');\r\n    };\r\n    Utility.insertAfter = function (elem, refElem) {\r\n        var parent = refElem.parentNode;\r\n        var next = refElem.nextSibling;\r\n        if (next) {\r\n            return parent.insertBefore(elem, next);\r\n        }\r\n        else {\r\n            return parent.appendChild(elem);\r\n        }\r\n    };\r\n    return Utility;\r\n}());\r\nexport { Utility };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Utils.ts\n// module id = 0\n// module chunks = 0 1","var EventObject = (function () {\r\n    function EventObject() {\r\n        this.events = {};\r\n    }\r\n    EventObject.prototype.$notifyEvent = function (eventName) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        if (this.events[eventName]) {\r\n            for (var i = 0; i < this.events[eventName].length; i++) {\r\n                this.events[eventName][i].apply(this, args);\r\n            }\r\n        }\r\n    };\r\n    EventObject.prototype.on = function (eventName, cb) {\r\n        if (!this.events[eventName]) {\r\n            this.events[eventName] = [];\r\n        }\r\n        this.events[eventName].push(cb);\r\n    };\r\n    return EventObject;\r\n}());\r\nexport { EventObject };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/EventObject.ts\n// module id = 1\n// module chunks = 0 1","import { DefaultPickerItem } from \"../pickeritems/DefaultPickerItem\";\r\nimport { Utility } from \"../Utils\";\r\nimport { DefaultSearcher } from \"../searchers/DefaultSearcher\";\r\nvar DefaultSearchPickerOptions = (function () {\r\n    function DefaultSearchPickerOptions() {\r\n        this.source = [];\r\n        this.placeholder = '';\r\n        this.maxSelectedChoices = 0;\r\n        this.minLengthToSearch = 1;\r\n        this.searchInValues = false;\r\n        //Представление элемента\r\n        this.pickerItemFactory = function (item) {\r\n            return DefaultPickerItem.create(item.id, item.title);\r\n        };\r\n        this.resultRenderer = function (item, query) {\r\n            var root = document.createElement('a');\r\n            root.setAttribute('href', '#');\r\n            var textNodes = Utility.wrapResultText(item.title, query);\r\n            for (var i = 0; i < textNodes.length; i++) {\r\n                root.appendChild(textNodes[i]);\r\n            }\r\n            return root;\r\n        };\r\n        this.noResultsRenderer = function (query) {\r\n            return document.createTextNode('No results found for \"' + Utility.htmlEncode(query) + '\"');\r\n        };\r\n        this.choiceRenderer = function (item, renderClose) {\r\n            var choice = document.createElement('span');\r\n            choice.appendChild(document.createTextNode(item.title));\r\n            if (renderClose) {\r\n                var close_1 = document.createElement('a');\r\n                close_1.href = 'javascript: void(0);';\r\n                close_1.className = 'search-choice-close';\r\n                choice.appendChild(close_1);\r\n            }\r\n            return choice;\r\n        };\r\n        this.searcher = new DefaultSearcher();\r\n    }\r\n    return DefaultSearchPickerOptions;\r\n}());\r\nexport { DefaultSearchPickerOptions };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/options/DefaultSearchPickerOptions.ts\n// module id = 2\n// module chunks = 0 1","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { EventObject } from \"./EventObject\";\r\nimport { Utility } from \"./Utils\";\r\nvar SearchPickerChoices = (function (_super) {\r\n    __extends(SearchPickerChoices, _super);\r\n    function SearchPickerChoices(container, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.container = container;\r\n        _this.options = options;\r\n        _this.selected = [];\r\n        _this.keepActive = false;\r\n        _this.isActive = false;\r\n        _this.pendingBackstroke = [];\r\n        _this.sizerElm = document.getElementById('__srchpicker-sizer');\r\n        if (_this.sizerElm) {\r\n            _this.sizerElmText = _this.sizerElm.childNodes[0];\r\n        }\r\n        _this.setup();\r\n        return _this;\r\n    }\r\n    SearchPickerChoices.prototype.addChoice = function (item) {\r\n        var id = this.selected.push(item) - 1;\r\n        //insert new choice item into DOM\r\n        this.container.insertBefore(this.$renderChoice(item, id), this.inputJsElmWrap);\r\n        this.setSearchText('');\r\n        this.scaleSearchField();\r\n    };\r\n    SearchPickerChoices.prototype.removeChoice = function (item) {\r\n        for (var i = 0; i < this.selected.length; i++) {\r\n            if (this.selected[i].id === item.id) {\r\n                this.selected.splice(i, 1);\r\n                this.removeChoiceElement(item.id.toString());\r\n                this.scaleSearchField();\r\n                this.$notifyEvent('choiceRemoved', item);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.removeAll = function () {\r\n        var length = this.selected.length;\r\n        for (var i = 0; i < length; i++) {\r\n            this.removeChoice(this.selected[0]);\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.getSearchText = function () {\r\n        return this.inputElm.value;\r\n    };\r\n    SearchPickerChoices.prototype.setSearchText = function (val) {\r\n        this.inputElm.value = val;\r\n    };\r\n    SearchPickerChoices.prototype.focus = function () {\r\n        if (!this.canSelectMoreChoices())\r\n            return;\r\n        this.onFocus();\r\n        this.inputElm.focus();\r\n    };\r\n    SearchPickerChoices.prototype.getHeight = function () {\r\n        return this.container.offsetHeight;\r\n    };\r\n    SearchPickerChoices.prototype.canSelectMoreChoices = function () {\r\n        if (this.options.maxSelectedChoices <= 0)\r\n            return true;\r\n        return this.selected.length < this.options.maxSelectedChoices;\r\n    };\r\n    SearchPickerChoices.prototype.setAutocompleteText = function (text) {\r\n        if (!this.shouldUpdateAutoComplete) {\r\n            return;\r\n        }\r\n        if (text && this.inputElm.value.length) {\r\n            this.removeAutocompleteText();\r\n            var selStart = this.inputElm.value.length;\r\n            if (text.toUpperCase().search(this.inputElm.value.toUpperCase()) === 0) {\r\n                this.inputElm.value = text;\r\n            }\r\n            else {\r\n                this.inputElm.value += \" (\" + text + \")\";\r\n            }\r\n            var selEnd = this.inputElm.value.length;\r\n            this.inputElm.setSelectionRange(selStart, selEnd);\r\n        }\r\n        this.scaleSearchField();\r\n    };\r\n    SearchPickerChoices.prototype.removeAutocompleteText = function () {\r\n        if (this.inputElm.selectionStart) {\r\n            this.inputElm.value = this.inputElm.value.substring(0, this.inputElm.selectionStart);\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.setup = function () {\r\n        this.applyTemplate();\r\n        this.bindEvents();\r\n        this.scaleSearchField();\r\n    };\r\n    SearchPickerChoices.prototype.scaleSearchField = function () {\r\n        if (!this.canSelectMoreChoices()) {\r\n            this.inputElm.style.display = 'none';\r\n            this.keepActive = false;\r\n            this.onBlur();\r\n            return;\r\n        }\r\n        var placeholderText = this.selected.length > 0 ? '' : this.options.placeholder;\r\n        this.inputElm.placeholder = placeholderText;\r\n        this.ensureSizerElement();\r\n        this.sizerElmText.nodeValue = this.inputElm.value || placeholderText;\r\n        var w = this.sizerElm.offsetWidth + 20;\r\n        this.inputElm.style.width = w + 'px';\r\n        if (this.inputElm.style.display !== 'block')\r\n            this.inputElm.style.display = 'block';\r\n    };\r\n    SearchPickerChoices.prototype.ensureSizerElement = function () {\r\n        if (!this.sizerElm) {\r\n            var div = document.createElement('div');\r\n            var styleBlock = \"position:absolute; left: -1000px; top: -1000px;\";\r\n            var styles = ['font-size', 'font-style', 'font-weight', 'font-family', 'line-height', 'text-transform', 'letter-spacing'];\r\n            for (var i = 0; i < styles.length; i++) {\r\n                var style = styles[i];\r\n                styleBlock += style + \":\" + Utility.getCssPropertyValue(this.inputElm, style) + \";\";\r\n            }\r\n            div.id = '__srchpicker-sizer';\r\n            div.style.cssText = styleBlock;\r\n            this.sizerElmText = document.createTextNode('');\r\n            div.appendChild(this.sizerElmText);\r\n            document.body.appendChild(div);\r\n            this.sizerElm = div;\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.bindEvents = function () {\r\n        var _this = this;\r\n        this.container.onclick = function () {\r\n            _this.onClick();\r\n        };\r\n        this.inputElm.onblur = function () {\r\n            _this.onBlur();\r\n        };\r\n        this.inputElm.onfocus = function () {\r\n            _this.onFocus();\r\n        };\r\n        this.inputElm.onkeyup = function (e) {\r\n            _this.onKeyUp(e);\r\n        };\r\n        this.inputElm.oninput = function (e) {\r\n            // IE 11 может выбросить событие input при установке плейсхолдера в элемент\r\n            if (document.activeElement !== e.target) {\r\n                return;\r\n            }\r\n            _this.onInput(e);\r\n        };\r\n        this.inputElm.onkeydown = function (e) {\r\n            _this.onKeyDown(e);\r\n        };\r\n    };\r\n    SearchPickerChoices.prototype.onClick = function () {\r\n        if (!this.canSelectMoreChoices())\r\n            return;\r\n        if (this.options.minLengthToSearch == 0 && this.isActive) {\r\n            this.clearBackstroke();\r\n            this.$notifyEvent('search', this.getSearchText());\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.onKeyUp = function (evt) {\r\n        switch (evt.keyCode) {\r\n            case 46:\r\n            case 8:\r\n                if (this.backstrokeLength < 1 && this.selected.length > 0) {\r\n                    this.keydownBackstroke();\r\n                }\r\n                else if (!this.pendingBackstroke.length && this.canSelectMoreChoices()) {\r\n                    this.clearHilightedChoice();\r\n                    //this.$notifyEvent('search', this.getSearchText());\r\n                }\r\n                this.scaleSearchField();\r\n                break;\r\n            case 13:\r\n                evt.preventDefault();\r\n                this.$notifyEvent('enter', evt);\r\n                break;\r\n            case 27:\r\n                this.$notifyEvent('escape', evt);\r\n                break;\r\n            case 9:\r\n            case 38:\r\n            case 40:\r\n            case 16:\r\n            case 17:\r\n            case 224: // mac\r\n            case 91:\r\n            case 92:\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.onInput = function (evt) {\r\n        this.shouldUpdateAutoComplete = this.prevInputTextLength <= this.inputElm.value.length;\r\n        this.prevInputTextLength = this.inputElm.value.length;\r\n        if (this.canSelectMoreChoices()) {\r\n            this.clearBackstroke();\r\n            this.scaleSearchField();\r\n            this.$notifyEvent('search', this.getSearchText());\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.onKeyDown = function (evt) {\r\n        switch (evt.keyCode) {\r\n            case 46:\r\n            case 8://backspace & del\r\n                this.backstrokeLength = this.inputElm.value.length;\r\n                break;\r\n            case 9:\r\n                this.$notifyEvent('tab', evt);\r\n                break;\r\n            case 13:\r\n            case 16:\r\n            case 17:\r\n                evt.preventDefault();\r\n                break;\r\n            case 38:\r\n                evt.preventDefault();\r\n                this.shouldUpdateAutoComplete = true;\r\n                this.$notifyEvent('arrowUp', evt);\r\n                break;\r\n            case 40:\r\n                evt.preventDefault();\r\n                this.shouldUpdateAutoComplete = true;\r\n                this.$notifyEvent('arrowDown', evt);\r\n                break;\r\n            case 35: // left, right, home, end\r\n            case 36:\r\n            case 37:\r\n            case 39:\r\n                // возможный сброс выделения с текста автодополнения\r\n                if (this.inputElm.selectionStart !== this.inputElm.selectionEnd) {\r\n                    this.onInput(evt);\r\n                }\r\n                break;\r\n            default:\r\n                if (!this.canSelectMoreChoices()) {\r\n                    evt.preventDefault();\r\n                }\r\n                else {\r\n                    this.scaleSearchField();\r\n                    //перебрасываем набор текста в инпут\r\n                    if (document.activeElement !== this.inputElm) {\r\n                        this.inputElm.focus();\r\n                        this.onFocus();\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.onRemoveChoiceClick = function (choice) {\r\n        var id = Utility.getAttribute(choice, 'data-id');\r\n        var item = this.getSelectedChoiceById(id);\r\n        if (item != null)\r\n            this.removeChoice(item);\r\n    };\r\n    SearchPickerChoices.prototype.clearHilightedChoice = function () {\r\n        if (this.highlightedChoice) {\r\n            Utility.removeClass(this.highlightedChoice, 'highlighted');\r\n            this.highlightedChoice = null;\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.clearBackstroke = function () {\r\n        if (this.pendingBackstroke.length) {\r\n            for (var _i = 0, _a = this.pendingBackstroke; _i < _a.length; _i++) {\r\n                var li = _a[_i];\r\n                Utility.removeClass(li, 'search-choice-focus');\r\n            }\r\n            this.pendingBackstroke = [];\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.keydownBackstroke = function () {\r\n        if (this.pendingBackstroke.length) {\r\n            for (var _i = 0, _a = this.pendingBackstroke; _i < _a.length; _i++) {\r\n                var li = _a[_i];\r\n                var id = Utility.getAttribute(li, 'data-id');\r\n                var selectedItem = this.getSelectedChoiceById(id);\r\n                if (selectedItem != null) {\r\n                    this.removeChoice(selectedItem);\r\n                    //li.blur();\r\n                }\r\n            }\r\n            this.clearBackstroke();\r\n            //this.$notifyEvent('blur')\r\n            //this.inputElm.focus();\r\n        }\r\n        else {\r\n            var items = this.container.getElementsByTagName(\"li\");\r\n            var lastChoice = null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (Utility.hasClass(items[i], 'search-choice'))\r\n                    lastChoice = items[i];\r\n            }\r\n            this.pendingBackstroke[0] = lastChoice;\r\n            if (this.pendingBackstroke[0] != null)\r\n                Utility.addClass(this.pendingBackstroke[0], \"search-choice-focus\");\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.onBlur = function () {\r\n        var _this = this;\r\n        this.inFocus = false;\r\n        if (!this.isActive)\r\n            return;\r\n        setTimeout(function () {\r\n            if (!_this.keepActive) {\r\n                Utility.removeClass(_this.container, 'active'); // active in ul root elem\r\n                _this.isActive = false;\r\n                _this.clearBackstroke();\r\n                _this.$notifyEvent('blur');\r\n            }\r\n        }, 10);\r\n    };\r\n    SearchPickerChoices.prototype.onFocus = function () {\r\n        var _this = this;\r\n        this.inFocus = true;\r\n        if (this.isActive)\r\n            return;\r\n        Utility.addClass(this.container, 'active'); // active in ul root elem\r\n        this.isActive = true;\r\n        setTimeout(function () {\r\n            if (_this.inFocus && document.activeElement === _this.inputElm)\r\n                _this.$notifyEvent('focus');\r\n        }, 10);\r\n    };\r\n    SearchPickerChoices.prototype.removeChoiceElement = function (id) {\r\n        var choices = this.container.getElementsByTagName('li');\r\n        for (var i = 0; i < choices.length; i++) {\r\n            if (Utility.hasClass(choices[i], 'search-choice')\r\n                && Utility.getAttribute(choices[i], 'data-id') === id) {\r\n                choices[i].parentElement.removeChild(choices[i]);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n    SearchPickerChoices.prototype.applyTemplate = function () {\r\n        this.inputJsElmWrap = document.createElement('li');\r\n        this.inputJsElmWrap.className = 'search-field';\r\n        this.inputElm = document.createElement('input');\r\n        this.inputElm.type = 'text';\r\n        this.inputElm.placeholder = this.options.placeholder;\r\n        this.inputElm.autocomplete = 'off';\r\n        this.inputJsElmWrap.appendChild(this.inputElm);\r\n        this.container.appendChild(this.inputJsElmWrap);\r\n    };\r\n    SearchPickerChoices.prototype.$renderChoice = function (item, index) {\r\n        var _this = this;\r\n        var choice = document.createElement('li');\r\n        choice.className = 'search-choice';\r\n        choice.setAttribute('data-id', item.id.toString());\r\n        if (this.options.maxSelectedChoices == 1) {\r\n            Utility.addClass(choice, \"sole-choice\");\r\n        }\r\n        choice.onclick = function (e) {\r\n            if (Utility.hasClass(e.target, 'search-choice-close')) {\r\n                _this.onRemoveChoiceClick(choice);\r\n                return;\r\n            }\r\n            Utility.addClass(choice, \"search-choice-focus\");\r\n            if (e.metaKey || e.ctrlKey) {\r\n                Utility.addClass(choice, \"search-choice-focus\");\r\n                _this.pendingBackstroke.push(choice);\r\n            }\r\n            else if (e.shiftKey) {\r\n                var newChoices = _this.getChoicesRange(choice, _this.pendingBackstroke[_this.pendingBackstroke.length - 1]);\r\n                for (var _i = 0, newChoices_1 = newChoices; _i < newChoices_1.length; _i++) {\r\n                    var ch = newChoices_1[_i];\r\n                    Utility.addClass(ch, \"search-choice-focus\");\r\n                    _this.pendingBackstroke.push(ch);\r\n                }\r\n            }\r\n            else {\r\n                _this.pendingBackstroke.forEach(function (el) {\r\n                    if (el !== choice) {\r\n                        Utility.removeClass(el, \"search-choice-focus\");\r\n                    }\r\n                });\r\n                _this.pendingBackstroke = [choice];\r\n            }\r\n            //e.preventDefault();\r\n            e.stopPropagation();\r\n            _this.inputElm.focus();\r\n        };\r\n        choice.onkeyup = function (e) {\r\n            _this.onKeyUp(e);\r\n        };\r\n        choice.onkeydown = function (e) {\r\n            _this.onKeyDown(e);\r\n        };\r\n        choice.appendChild(this.options.choiceRenderer(item, this.options.maxSelectedChoices == 1));\r\n        return choice;\r\n    };\r\n    SearchPickerChoices.prototype.getSelectedChoiceById = function (id) {\r\n        for (var i = 0; i < this.selected.length; i++) {\r\n            if (this.selected[i].id.toString() === id)\r\n                return this.selected[i];\r\n        }\r\n        return null;\r\n    };\r\n    SearchPickerChoices.prototype.getChoicesRange = function (choice1, choice2) {\r\n        var nodesToAdd = [], inInterval = false;\r\n        for (var k = 0, e = this.container.childNodes.item(0); k < this.container.childNodes.length; ++k) {\r\n            if (e === choice1 || e === choice2) {\r\n                nodesToAdd.push(e);\r\n                inInterval = !inInterval;\r\n                if (!inInterval)\r\n                    break;\r\n            }\r\n            else if (inInterval && Utility.hasClass(e, \"search-choice\")) {\r\n                nodesToAdd.push(e);\r\n            }\r\n            e = e.nextSibling;\r\n        }\r\n        return nodesToAdd;\r\n    };\r\n    return SearchPickerChoices;\r\n}(EventObject));\r\nexport { SearchPickerChoices };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/SearchPickerChoices.ts\n// module id = 3\n// module chunks = 0 1","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Utility } from \"./Utils\";\r\nimport { EventObject } from \"./EventObject\";\r\nvar SearchPickerResults = (function (_super) {\r\n    __extends(SearchPickerResults, _super);\r\n    function SearchPickerResults(sourceElm, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.sourceElm = sourceElm;\r\n        _this.options = options;\r\n        _this.hideOnEmptyResults = false;\r\n        _this.selectFirstOnDefault = true;\r\n        _this.isShown = false;\r\n        _this.trackSelectedItems = true;\r\n        _this.items = [];\r\n        _this.itemsToHide = [];\r\n        _this.selectedObj = {};\r\n        _this.lastSearchQuery = null;\r\n        _this.processSearchResponses = true;\r\n        _this.setupHtml();\r\n        _this.bindEvents();\r\n        _this.highlightedIndex = _this.getDefaultHighlightedIndex();\r\n        return _this;\r\n    }\r\n    SearchPickerResults.prototype.hide = function () {\r\n        if (!this.isShown)\r\n            return;\r\n        this.dropdownElm.style.left = '-9000px';\r\n        this.isShown = false;\r\n    };\r\n    SearchPickerResults.prototype.show = function () {\r\n        if (this.isShown)\r\n            return;\r\n        this.dropdownElm.style.left = '0';\r\n        this.isShown = true;\r\n        this.invalidateActiveResultByIndex();\r\n    };\r\n    SearchPickerResults.prototype.search = function (query) {\r\n        if (this.lastSearchQuery === query) {\r\n            if (this.hideOnEmptyResults && this.items.length === 0)\r\n                this.hide();\r\n            else\r\n                this.show();\r\n            return;\r\n        }\r\n        this.searchInternal(query);\r\n    };\r\n    SearchPickerResults.prototype.repositionResults = function () {\r\n        this.setTop(this.sourceElm.offsetHeight);\r\n    };\r\n    SearchPickerResults.prototype.moveSelectedDown = function () {\r\n        if (!this.isShown)\r\n            return;\r\n        this.highlightedIndex++;\r\n        if (this.highlightedIndex > this.items.length - 1) {\r\n            this.highlightedIndex = this.items.length - 1;\r\n        }\r\n        this.invalidateActiveResultByIndex();\r\n    };\r\n    SearchPickerResults.prototype.moveSelectedUp = function () {\r\n        if (!this.isShown)\r\n            return;\r\n        this.highlightedIndex--;\r\n        if (this.highlightedIndex <= this.getDefaultHighlightedIndex()) {\r\n            this.highlightedIndex = this.getDefaultHighlightedIndex();\r\n        }\r\n        this.invalidateActiveResultByIndex();\r\n    };\r\n    SearchPickerResults.prototype.selectHighlighted = function (selectedVia) {\r\n        if (!this.highlightedEl)\r\n            return;\r\n        var id = Utility.getAttribute(this.highlightedEl, 'data-id');\r\n        var item = this.getItemById(id);\r\n        if (item != null)\r\n            this.$notifyEvent('resultSelected', item, selectedVia);\r\n        this.setProcessSearchResponses(false);\r\n    };\r\n    SearchPickerResults.prototype.setTop = function (top) {\r\n        if (top <= 0)\r\n            top = 0;\r\n        this.dropdownElm.style.top = top + 'px';\r\n    };\r\n    SearchPickerResults.prototype.addSelectedResult = function (result) {\r\n        if (!this.trackSelectedItems)\r\n            return; //option disabled\r\n        if (!this.selectedObj[result.id]) {\r\n            this.selectedObj[result.id] = true;\r\n            this.invalidateSelectedResults();\r\n            this.clearHighlighted();\r\n        }\r\n    };\r\n    SearchPickerResults.prototype.removeSelectedResult = function (item) {\r\n        if (!this.trackSelectedItems)\r\n            return; //option disabled\r\n        if (!this.isSelected(item.id.toString()))\r\n            return;\r\n        delete this.selectedObj[item.id.toString()];\r\n        this.invalidateSelectedResults();\r\n    };\r\n    SearchPickerResults.prototype.updateOptions = function (options) {\r\n        this.options = options;\r\n    };\r\n    SearchPickerResults.prototype.addToBlacklist = function (items) {\r\n        if (!items) {\r\n            return;\r\n        }\r\n        var toAdd;\r\n        if (!Array.isArray(items)) {\r\n            toAdd = [items];\r\n        }\r\n        else {\r\n            toAdd = items;\r\n        }\r\n        this.itemsToHide = this.itemsToHide.concat(toAdd);\r\n        if (toAdd.length) {\r\n            this.invalidateSelectedResults();\r\n        }\r\n    };\r\n    SearchPickerResults.prototype.removeFromBlacklist = function (items) {\r\n        if (!items) {\r\n            return;\r\n        }\r\n        var toRemove;\r\n        if (!Array.isArray(items)) {\r\n            toRemove = [items];\r\n        }\r\n        else {\r\n            toRemove = items;\r\n        }\r\n        if (toRemove.length) {\r\n            for (var _i = 0, toRemove_1 = toRemove; _i < toRemove_1.length; _i++) {\r\n                var i = toRemove_1[_i];\r\n                for (var b = this.itemsToHide.length - 1; b >= 0; b--) {\r\n                    if (i.id === this.itemsToHide[b].id) {\r\n                        this.itemsToHide.splice(b, 1);\r\n                    }\r\n                }\r\n            }\r\n            this.invalidateSelectedResults();\r\n        }\r\n    };\r\n    SearchPickerResults.prototype.getHighlighted = function () {\r\n        if (this.highlightedEl) {\r\n            var hi = this.getItemById(this.highlightedEl.getAttribute(\"data-id\"));\r\n            if (hi) {\r\n                return hi;\r\n            }\r\n        }\r\n    };\r\n    /* устанавливаем флаг, что не нужно обрабатывать результаты поиска\r\n        (напр.  из-зп того что поле сейчас пустое) */\r\n    SearchPickerResults.prototype.setProcessSearchResponses = function (process) {\r\n        this.processSearchResponses = process;\r\n    };\r\n    SearchPickerResults.prototype.isSelected = function (id) {\r\n        return typeof (this.selectedObj[id]) !== 'undefined';\r\n    };\r\n    SearchPickerResults.prototype.searchInternal = function (query) {\r\n        var _this = this;\r\n        this.lastSearchQuery = query;\r\n        this.setProcessSearchResponses(true);\r\n        return this.options.searcher.search(query, this.options, function (items) {\r\n            if (query !== _this.lastSearchQuery || !_this.processSearchResponses) {\r\n                return;\r\n            }\r\n            _this.resultsElm.innerHTML = '';\r\n            _this.items = items;\r\n            var hasResults = false;\r\n            if (items.length) {\r\n                for (var i = 0; i < items.length; i++) {\r\n                    //блеклист\r\n                    if (_this.itemsToHide.indexOf(items[i]) > -1 || _this.isSelected(items[i].id)) {\r\n                        continue;\r\n                    }\r\n                    //лимит на показываемые результаты\r\n                    if (_this.options.resultsLimit && i >= _this.options.resultsLimit) {\r\n                        break;\r\n                    }\r\n                    var result = _this.$buildResult(items[i], query);\r\n                    if (result != null) {\r\n                        _this.resultsElm.appendChild(result);\r\n                        hasResults = true;\r\n                    }\r\n                }\r\n            }\r\n            _this.clearHighlighted();\r\n            if (!hasResults) {\r\n                if (_this.hideOnEmptyResults) {\r\n                    _this.hide();\r\n                }\r\n                else {\r\n                    _this.resultsElm.appendChild(_this.$buildNoResults(query));\r\n                    _this.show();\r\n                }\r\n            }\r\n            else {\r\n                _this.show();\r\n            }\r\n        }, function (message) {\r\n            _this.resultsElm.appendChild(_this.$buildErrorResult(message));\r\n        });\r\n    };\r\n    SearchPickerResults.prototype.setupHtml = function () {\r\n        this.dropdownElm = document.createElement('div');\r\n        this.dropdownElm.className = 'dropdown';\r\n        Utility.insertAfter(this.dropdownElm, this.sourceElm);\r\n        this.resultsElm = this.$template();\r\n        this.dropdownElm.style.left = '-9000px';\r\n        this.dropdownElm.appendChild(this.resultsElm);\r\n    };\r\n    SearchPickerResults.prototype.bindEvents = function () {\r\n        var _this = this;\r\n        this.dropdownElm.onclick = function (e) {\r\n            var result = e.target;\r\n            while (result != null) {\r\n                if (Utility.hasClass(result, 'result'))\r\n                    break;\r\n                result = result['parentElement'];\r\n            }\r\n            if (!result || Utility.hasClass(result, 'disabled'))\r\n                return false;\r\n            var id = Utility.getAttribute(result, 'data-id');\r\n            var item = _this.getItemById(id);\r\n            if (item != null)\r\n                _this.$notifyEvent('resultSelected', item, 'click');\r\n            return false;\r\n        };\r\n    };\r\n    SearchPickerResults.prototype.$buildResult = function (item, query) {\r\n        var result = document.createElement('li');\r\n        result.className = 'result';\r\n        var idStr = item.id.toString();\r\n        result.setAttribute('data-id', idStr);\r\n        if (this.isSelected(idStr))\r\n            result.className += ' disabled';\r\n        result.appendChild(this.options.resultRenderer(item, query));\r\n        return result;\r\n    };\r\n    SearchPickerResults.prototype.clearHighlighted = function () {\r\n        this.highlightedIndex = this.getDefaultHighlightedIndex();\r\n        //this.highlightedEl = null;\r\n        this.invalidateActiveResultByIndex();\r\n    };\r\n    SearchPickerResults.prototype.$buildNoResults = function (query) {\r\n        var noResult = document.createElement('li');\r\n        noResult.className = 'no-results';\r\n        noResult.appendChild(this.options.noResultsRenderer(query));\r\n        return noResult;\r\n    };\r\n    SearchPickerResults.prototype.$buildErrorResult = function (message) {\r\n        var errorResult = document.createElement('li');\r\n        errorResult.className = 'no-results';\r\n        errorResult.appendChild(document.createTextNode(message));\r\n        return errorResult;\r\n    };\r\n    SearchPickerResults.prototype.$template = function () {\r\n        var ul = document.createElement('ul');\r\n        ul.className = 'dropdown-menu';\r\n        return ul;\r\n    };\r\n    SearchPickerResults.prototype.getItemById = function (id) {\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            if (this.items[i].id.toString() === id)\r\n                return this.items[i];\r\n        }\r\n        return null;\r\n    };\r\n    SearchPickerResults.prototype.invalidateSelectedResults = function () {\r\n        var _this = this;\r\n        this.$foreachResult(function (result) {\r\n            var id = Utility.getAttribute(result, 'data-id');\r\n            if (_this.isSelected(id) || _this.itemsToHide.some(function (item) { return item.id === id; })) {\r\n                Utility.removeClass(result, 'highlighted');\r\n                Utility.addClass(result, 'disabled');\r\n            }\r\n            else {\r\n                Utility.removeClass(result, 'disabled');\r\n            }\r\n            return true;\r\n        });\r\n    };\r\n    SearchPickerResults.prototype.invalidateActiveResultByIndex = function () {\r\n        var _this = this;\r\n        var hoverRemoved = false, elemFound = false;\r\n        var index = 0;\r\n        var beforeId = this.highlightedEl ? this.highlightedEl.getAttribute(\"data-id\") : -1;\r\n        this.highlightedEl = null;\r\n        this.$foreachResult(function (result) {\r\n            if (Utility.hasClass(result, 'disabled') || Utility.hasClass(result, 'no-results'))\r\n                return true; //continue\r\n            if (!elemFound && index === _this.highlightedIndex) {\r\n                _this.highlightedEl = result;\r\n                elemFound = true;\r\n            }\r\n            else if (!hoverRemoved && Utility.hasClass(result, 'highlighted')) {\r\n                Utility.removeClass(result, 'highlighted');\r\n                hoverRemoved = true;\r\n            }\r\n            if (elemFound && hoverRemoved)\r\n                return false; //break\r\n            index++;\r\n            return true; //continue\r\n        });\r\n        var afterId = this.highlightedEl ? this.highlightedEl.getAttribute(\"data-id\") : -1;\r\n        this.$notifyEvent(\"highlight\", {\r\n            item: afterId ? this.getItemById(afterId) : undefined,\r\n            hasChanged: beforeId !== afterId\r\n        });\r\n        this.repositionResults();\r\n        if (this.highlightedEl) {\r\n            Utility.addClass(this.highlightedEl, 'highlighted');\r\n            this.invalidateActiveResultVisible(this.highlightedEl);\r\n        }\r\n    };\r\n    SearchPickerResults.prototype.invalidateActiveResult = function () {\r\n        var _this = this;\r\n        if (!this.highlightedEl)\r\n            return;\r\n        var hoverRemoved = false, itemFound = false;\r\n        var index = 0;\r\n        this.$foreachResult(function (result) {\r\n            if (Utility.hasClass(result, 'disabled'))\r\n                return true;\r\n            if (!itemFound && _this.highlightedEl === result) {\r\n                _this.highlightedIndex = index;\r\n                itemFound = true;\r\n            }\r\n            else if (!hoverRemoved && Utility.hasClass(result, 'highlighted')) {\r\n                Utility.removeClass(result, 'highlighted');\r\n                hoverRemoved = true;\r\n            }\r\n            if (itemFound && hoverRemoved)\r\n                return false; //break;\r\n            index++;\r\n            return true; //continue\r\n        });\r\n        Utility.addClass(this.highlightedEl, 'highlighted');\r\n    };\r\n    SearchPickerResults.prototype.$foreachResult = function (cb) {\r\n        var liCollection = this.resultsElm.childNodes;\r\n        for (var i = 0; i < liCollection.length; i++) {\r\n            if (!cb(liCollection[i]))\r\n                break;\r\n        }\r\n    };\r\n    SearchPickerResults.prototype.invalidateActiveResultVisible = function (el) {\r\n        var resultsJsObj = this.resultsElm;\r\n        var maxHeight = parseInt(Utility.getCssPropertyValue(resultsJsObj, 'maxHeight') || \"190px\", 10);\r\n        var scrollTop = resultsJsObj.scrollTop;\r\n        var visibleBottom = maxHeight + scrollTop;\r\n        var elTop = el.offsetTop;\r\n        var elBottom = elTop + el.offsetHeight;\r\n        if (elBottom >= visibleBottom) {\r\n            resultsJsObj.scrollTop = scrollTop + (elBottom - visibleBottom);\r\n        }\r\n        else if (el.offsetTop < scrollTop) {\r\n            resultsJsObj.scrollTop = el.offsetTop;\r\n        }\r\n    };\r\n    SearchPickerResults.prototype.getDefaultHighlightedIndex = function () {\r\n        return this.selectFirstOnDefault ? 0 : -1;\r\n    };\r\n    return SearchPickerResults;\r\n}(EventObject));\r\nexport { SearchPickerResults };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/SearchPickerResults.ts\n// module id = 4\n// module chunks = 0 1","export { DefaultSearchPickerOptions } from \"./options/DefaultSearchPickerOptions\";\r\nexport { EventObject } from \"./EventObject\";\r\nexport { SearchPicker } from \"./SearchPicker\";\r\nexport { SearchPickerChoices } from \"./SearchPickerChoices\";\r\nexport { SearchPickerResults } from \"./SearchPickerResults\";\r\nexport { Utility } from \"./Utils\";\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.ts\n// module id = 5\n// module chunks = 0 1","var DefaultPickerItem = (function () {\r\n    function DefaultPickerItem() {\r\n    }\r\n    DefaultPickerItem.create = function (id, title) {\r\n        var item = new DefaultPickerItem();\r\n        item.title = title;\r\n        item.id = id;\r\n        return item;\r\n    };\r\n    return DefaultPickerItem;\r\n}());\r\nexport { DefaultPickerItem };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pickeritems/DefaultPickerItem.ts\n// module id = 6\n// module chunks = 0 1","import { Utility } from \"../Utils\";\r\nvar DefaultSearcher = (function () {\r\n    function DefaultSearcher() {\r\n        this.pickerItems = null;\r\n        this.foundItems = [];\r\n    }\r\n    DefaultSearcher.prototype.search = function (query, options, onresults, onerror) {\r\n        var _this = this;\r\n        if (this.tmrId)\r\n            clearTimeout(this.tmrId);\r\n        this.tmrId = setTimeout(function () {\r\n            if (!_this.pickerItems)\r\n                _this.pickerItems = $map(options.source, options);\r\n            _this.foundItems = Utility.filterItems(_this.pickerItems, query, options);\r\n            _this.tmrId = null;\r\n            onresults(_this.foundItems);\r\n        }, 50);\r\n    };\r\n    return DefaultSearcher;\r\n}());\r\nexport { DefaultSearcher };\r\nfunction $map(source, options) {\r\n    var result = [];\r\n    for (var i = 0; i < source.length; i++) {\r\n        result.push(options.pickerItemFactory(source[i]));\r\n    }\r\n    return result;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/searchers/DefaultSearcher.ts\n// module id = 7\n// module chunks = 0 1","var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { EventObject } from \"./EventObject\";\r\nimport { SearchPickerChoices } from \"./SearchPickerChoices\";\r\nimport { SearchPickerResults } from \"./SearchPickerResults\";\r\nimport { DefaultSearchPickerOptions } from \"./options/DefaultSearchPickerOptions\";\r\nimport { Utility } from \"./Utils\";\r\nvar SearchPicker = (function (_super) {\r\n    __extends(SearchPicker, _super);\r\n    function SearchPicker(container, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.container = container;\r\n        _this.pickerItems = [];\r\n        _this.searchTmrId = null;\r\n        _this.options = _this.extendOptions(new DefaultSearchPickerOptions(), options);\r\n        _this.setupHtml();\r\n        _this.bindEvents();\r\n        return _this;\r\n    }\r\n    SearchPicker.prototype.getChoices = function () {\r\n        return this.choices.selected;\r\n    };\r\n    SearchPicker.prototype.clearChoices = function () {\r\n        this.choices.removeAll();\r\n    };\r\n    SearchPicker.prototype.addChoice = function (item) {\r\n        this.choices.addChoice(item);\r\n        this.results.addSelectedResult(item);\r\n    };\r\n    SearchPicker.prototype.removeChoice = function (item) {\r\n        this.choices.removeChoice(item);\r\n        this.results.removeSelectedResult(item);\r\n    };\r\n    SearchPicker.prototype.updateSource = function (source) {\r\n        this.options.source = source;\r\n        this.results.updateOptions(this.options);\r\n    };\r\n    SearchPicker.prototype.focus = function () {\r\n        this.choices.focus();\r\n    };\r\n    SearchPicker.prototype.setupHtml = function () {\r\n        Utility.addClass(this.container, 'container');\r\n        this.applyTemplate();\r\n        this.choices = new SearchPickerChoices(this.choicesElm, this.options);\r\n        this.results = new SearchPickerResults(this.choicesElm, this.options);\r\n    };\r\n    SearchPicker.prototype.bindEvents = function () {\r\n        var _this = this;\r\n        this.container.onclick = function () { return _this.onClick(); };\r\n        this.container.onmouseleave = function () {\r\n            _this.choices.keepActive = false;\r\n        };\r\n        this.container.onmouseenter = function () {\r\n            _this.choices.keepActive = true;\r\n        };\r\n        this.choices.on('search', function (text) {\r\n            _this.onSearch(text);\r\n        });\r\n        this.choices.on('blur', function () {\r\n            _this.inFocus = false;\r\n            _this.results.hide();\r\n        });\r\n        this.choices.on('focus', function () {\r\n            _this.inFocus = true;\r\n            _this.onSearch(_this.choices.getSearchText());\r\n        });\r\n        this.choices.on('escape', function () {\r\n            _this.onEscape();\r\n        });\r\n        this.choices.on('tab', function (e) {\r\n            _this.onSelect(e, 'tab');\r\n        });\r\n        this.choices.on('enter', function (e) {\r\n            _this.onSelect(e, 'enter');\r\n        });\r\n        this.choices.on('arrowDown', function () { return _this.results.moveSelectedDown(); });\r\n        this.choices.on('arrowUp', function () { return _this.results.moveSelectedUp(); });\r\n        this.choices.on('choiceRemoved', function (item) { return _this.onChoiceRemoved(item); });\r\n        this.results.on('resultSelected', function (result) { return _this.onResultSelected(result); });\r\n        this.results.on('highlight', function (_a) {\r\n            var item = _a.item, changed = _a.changed;\r\n            if (item) {\r\n                _this.choices.setAutocompleteText(item.title);\r\n            }\r\n        });\r\n    };\r\n    SearchPicker.prototype.onSearch = function (text) {\r\n        if (text.length < this.options.minLengthToSearch || !this.choices.canSelectMoreChoices()) {\r\n            this.results.hide();\r\n            //случай, когда приходит устаревший поиск уже при пустом/недостаточно длинном поле\r\n            this.results.setProcessSearchResponses(false);\r\n        }\r\n        else if (this.inFocus) {\r\n            this.results.search(text);\r\n            this.results.setProcessSearchResponses(true);\r\n        }\r\n    };\r\n    SearchPicker.prototype.onChoiceRemoved = function (item) {\r\n        this.results.removeSelectedResult(item);\r\n        this.$notifyEvent('choiceRemoved', item);\r\n        this.results.setTop(this.choices.getHeight());\r\n    };\r\n    SearchPicker.prototype.onClick = function () {\r\n        this.choices.focus();\r\n    };\r\n    SearchPicker.prototype.onEscape = function () {\r\n        this.results.hide();\r\n    };\r\n    SearchPicker.prototype.onSelect = function (e, selectedVia) {\r\n        if (!this.results.isShown)\r\n            return;\r\n        e.preventDefault();\r\n        this.results.selectHighlighted(selectedVia);\r\n    };\r\n    SearchPicker.prototype.onResultSelected = function (result) {\r\n        this.choices.addChoice(result);\r\n        this.results.hide();\r\n        this.results.addSelectedResult(result);\r\n        this.results.setTop(this.choices.getHeight());\r\n        this.$notifyEvent('choiceAdded', result);\r\n    };\r\n    SearchPicker.prototype.applyTemplate = function () {\r\n        this.choicesElm = document.createElement('ul');\r\n        this.choicesElm.className = 'choices form-control';\r\n        if (this.options.maxSelectedChoices === 1) {\r\n            Utility.addClass(this.choicesElm, \"sole-choice\");\r\n        }\r\n        this.container.appendChild(this.choicesElm);\r\n    };\r\n    SearchPicker.prototype.extendOptions = function (def, user) {\r\n        var result = {};\r\n        for (var prop in user) {\r\n            result[prop] = user[prop];\r\n        }\r\n        for (var prop in def) {\r\n            if (typeof (user[prop]) == 'undefined')\r\n                result[prop] = def[prop];\r\n        }\r\n        return result;\r\n    };\r\n    return SearchPicker;\r\n}(EventObject));\r\nexport { SearchPicker };\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/SearchPicker.ts\n// module id = 8\n// module chunks = 0 1"],"sourceRoot":""}